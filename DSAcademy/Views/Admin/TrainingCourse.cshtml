@model IEnumerable<Core.Models.TrainingCourse>

@{
	ViewData["Title"] = "Training Courses";
	Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<!-- Main container start -->
<div style="display: flex; flex-direction: row;">
	<main class="ttr-wrapper">
		<div class="container-fluid">
			<!-- Page Header -->
			<div class="page-header">

				<div class="row">
					<div class="col">
						<h3 class="page-title">Training Course Setup</h3>
					</div>
					<div class="col-auto float-right ml-auto">
						<a  class="btn add-btn" href="#" data-toggle="modal" data-target="#add_Course"><i class="fa fa-plus"></i> Add Course</a>
					</div>
				</div>
			</div>
			<!-- /Page Header -->
			@if (Model != null || Model.Count() > 0)
			{
				@foreach (var trainingCourse in Model)
				{
					<div class="row">
						<!-- Your Profile Views Chart -->
						<div class="col-lg-12 m-b30">
							<div class="widget-box">
								<div class="widget-inner">
									<div class="card-courses-list admin-courses">
										<div class="card-courses-media">
											<img src="@trainingCourse.Logo" />
										</div>
										<div class="card-courses-full-dec">
											<div class="card-courses-title">
												<h4>@trainingCourse.Title</h4>
											</div>
											<div class="card-courses-list-bx">
												<ul class="card-courses-view">
													<li class="card-courses-user">
														<div class="card-courses-user-pic">
															<img src="~/edu/assets/images/testimonials/pic3.jpg" />
														</div>
														<div class="card-courses-user-info">
															<h5>Teacher</h5>
															<h4>Keny White</h4>
														</div>
													</li>
													<li class="card-courses-categories">
														<h5>Categories</h5>
														<h4>@trainingCourse?.ProgramStatus.Value</h4>
													</li>


													<li class="card-courses-categories">
														<h5>Amount</h5>
														<h4>$@trainingCourse?.Amount</h4>
													</li>
												</ul>
											</div>
											<div class="row card-courses-dec">
												<div class="col-md-12">
													<h6 class="m-b10">Course Description</h6>
													<p>@trainingCourse?.Description </p>
												</div>
												<div class="col-md-12">
													<a onclick="getCourseById('@trainingCourse?.Id')" href="#" data-toggle="modal" data-target="#upgrade_Course" class="btn green radius-xl outline">Edit Course</a>
													<a onclick="getCourseByIdToDelete('@trainingCourse?.Id')" href="#" data-toggle="modal" data-target="#delete_Course" class="btn red outline radius-xl ">Delete Course</a>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- Your Profile Views Chart END-->
					</div>
				}

			}
		</div>
	</main>
	<div class="ttr-overlay"></div>
</div>


<!-- Add Course Modal -->
<div class="modal custom-modal fade" id="add_Course" role="dialog">
	<div class="modal-dialog modal-md modal-dialog-centered modal-lg">
		<div class="modal-content">
			<button type="button" class="close" data-dismiss="modal" style="margin-left:95%;"><i class="fa fa-close"></i></button>
			<div class="modal-body">
				<h5 class="modal-title text-center mb-3">Add Course</h5>
				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							<label>Course Title</label>
							<input type="text" id="Title" class="form-control" required>
							<p class="text-danger" id="titleVDT" style="display: none;">Enter Course Title</p>
						</div>
					</div>
					
					<div class="col-md-6">
						<div class="form-group">
							<label>Amount</label>
							<input type="number" id="Cost" class="form-control" required>
							<p class="text-danger" id="amtcVDT" style="display: none;">Enter Amount</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Training Duration</label>
							<input type="text" id="Duration" class="form-control" required>
							<p class="text-danger" id="durationVDT" style="display: none;">Enter Duration</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Test Duration (Minutes)</label>
							<input type="number" id="TestDuration" class="form-control" required>
							<p class="text-danger" id="testDurationVDT" style="display: none;">Enter Test Duration</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Image</label>
							<input type="file" id="logoId" class="form-control" required>
							<p class="text-danger" id="testLogoVDT" style="display: none;">Enter Image</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Program</label>
							<select class="form-control" id="programId" required asp-items="@(new SelectList(@ViewBag.Program,  "Id", "Name" ))"></select>
						</div>
					</div>
					<div class="col-md-12">
						<div class="form-group">
							<label>Course Description</label>
							<textarea rows="3" class="form-control" id="Description" required></textarea>
							<p class="text-danger" id="descVDT" style="display: none;">Enter Course Description</p>
						</div>
					</div>
				</div>
				<div class="m-t-20 text-center">
					<button class="btn newBtn submit-btn" onclick="CreateTrainingCourse('CreateTrainingCourse')">Add Courses</button>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Add Course Modal -->
<!-- Edit Course Modal -->
<div class="modal custom-modal fade" id="upgrade_Course" role="dialog">
	<div class="modal-dialog modal-md modal-dialog-centered modal-lg">
		<div class="modal-content">
			<button type="button" class="close" data-dismiss="modal" style="margin-left:95%;"><i class="fa fa-close"></i></button>
			<div class="modal-body">
				<h5 class="modal-title text-center mb-3">Edit Course</h5>
				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							<label>Course Title</label>
							<input type="text" id="edit_Id" hidden>
							<input type="text" id="editTitle" class="form-control" required>
							<p class="text-danger" id="titleVDT" style="display: none;">Enter Course Title</p>
						</div>
					</div>

					<div class="col-md-6">
						<div class="form-group">
							<label>Amount</label>
							<input type="number" id="editCost" class="form-control" required>
							<p class="text-danger" id="amtcVDT" style="display: none;">Enter Amount</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Training Duration</label>
							<input type="text" id="editDuration" class="form-control" required>
							<p class="text-danger" id="durationVDT" style="display: none;">Enter Duration</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Test Duration (Minutes)</label>
							<input type="number" id="editTestDuration" class="form-control" required>
							<p class="text-danger" id="testDurationVDT" style="display: none;">Enter Test Duration</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Image</label>
							<input type="file" id="editlogoId" class="form-control" required>
							<p class="text-danger" id="testLogoVDT" style="display: none;">Enter Image</p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label>Program</label>
							<select class="form-control" id="editProgramId" required asp-items="@(new SelectList(@ViewBag.Program,  "Id", "Name" ))"></select>
						</div>
					</div>
					<div class="col-md-12">
						<div class="form-group">
							<label>Course Description</label>
							<textarea rows="3" class="form-control" id="editDescription" required></textarea>
							<p class="text-danger" id="descVDT" style="display: none;">Enter Course Description</p>
						</div>
					</div>
				</div>
				<div class="m-t-20 text-center">
					<button class="btn newBtn submit-btn" onclick="EditTrainingCourse('EditTrainingCourse')">Update</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- /Edit Course Modal -->
<!-- Delete Course Modal -->
<div class="modal custom-modal fade" id="delete_Course" role="dialog">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-body">
				<div class="form-header">
					<h3 style="text-align:center;">Delete Course</h3>
					<input class="form-control" type="text" hidden id="Delete_Id">
					<p style="text-align:center;">Are you sure you want to delete this course?</p>
				</div>
				<div class="modal-btn delete-action">
					<div class="row">
						<div class="col-6">
							<a class="btn btn-primary continue-btn" style="margin-left:20%;" onclick="TrainingCoursePost('DeleteTrainingCourse')">Delete</a>
						</div>
						<div class="col-6" style="padding-left:20%;">
							<a data-dismiss="modal"  class="btn btn-primary cancel-btn">Cancel</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Delete Course Modal -->
<!-- VIEW TRAINING OUTLINE Modal -->
<div id="description_Modal" class="modal custom-modal fade" role="dialog">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<h3 class="text-center pb-2">Course Description</h3>
			</div>
			<div class="w-100 px-4" id="view_Outline"></div>
		</div>
	</div>
</div>
<!-- /VIEW TRAINING OUTLINE Modal -->

<script>
	function ViewOutline2(id) {
		$.ajax({
			type: 'GET',
			url: '/Admin/GetCourseDescriptionById',
			data: { id: id },
			dataType: 'json',
			success: function (data) {
				if (!data.isError) {
					var outlin = data.split("\n");
					document.getElementById('view_Outline').innerHTML = "<ul><li>" + outlin.join("</li><li>") + "</li></ul>";
				}
			}
		});
	}
</script>


